(function(b){function a(d,c){this.el=$(d);this.opt=c;this.item=$(this.opt.item,this.el);this.len=this.item.length;this.prevTime=new Date().getTime();this.curIndex=0;this.setScroll=true;this.setdom();this.addMouseWheelHandler();if(this.opt.beforeFunction&&typeof this.opt.beforeFunction=="function"){this.opt.beforeFunction(this.curIndex)}}a.prototype.setdom=function(){var e=this,c=this.el.html();this.container=$("<div></div>").attr("class",this.opt.container).html(c).css("height",this.len*100+"%");this.el.empty().append(this.container);this.item=$(this.opt.item,this.container);this.item.css("height",100/this.len+"%");this.menu=$("<div>").attr("class",this.opt.menu).html("<ul></ul>");for(var d=0;d<this.len;d++){this.menu.find("ul").append("<li><span></span></li>")}this.menu.find("li:first").addClass("cur");this.menu.appendTo($("body"));this.menu.find("li").click(function(){e.scrollTo($(this).index())});$(b).resize(function(){e.scrollTo(e.curIndex)})};a.prototype.addMouseWheelHandler=function(){var c=this;if(document.addEventListener){document.addEventListener("mousewheel",function(d){c.MouseWheelHandler(d)},false);document.addEventListener("wheel",function(d){c.MouseWheelHandler(d)},false);document.addEventListener("DOMMouseScroll",function(d){c.MouseWheelHandler(d)},false)}else{document.attachEvent("onmousewheel",function(d){c.MouseWheelHandler(d)})}};a.prototype.MouseWheelHandler=function(f){var d=new Date().getTime();f=f||b.event;var c=f.wheelDelta||-f.deltaY||-f.detail;if(!this.setScroll||d-this.prevTime<500){return}this.setScroll=false;this.prevTime=d;if(c>0){this.scrolling("up")}else{this.scrolling("down")}};a.prototype.scrolling=function(d){this.setScroll=false;var e=this.container.css("top"),c=this.el.height(),f=this;if(d=="down"&&this.curIndex<this.len-1){if(this.opt.beforeFunction&&typeof this.opt.beforeFunction=="function"){this.opt.beforeFunction(this.curIndex)}this.curIndex=this.curIndex+1}else{if(d=="up"&&this.curIndex>0){if(this.opt.beforeFunction&&typeof this.opt.beforeFunction=="function"){this.opt.beforeFunction(this.curIndex)}this.curIndex=this.curIndex-1}else{this.setScroll=true;return}}e=0-this.curIndex*c;this.container.animate({top:e},500,"easeInOutCubic",function(){if(f.opt.afterFunction&&typeof f.opt.afterFunction=="function"){f.opt.afterFunction(f.curIndex)}setTimeout(function(){f.setScroll=true},f.opt.timeout)});this.menu.find("li").removeClass("cur");this.menu.find("li").eq(this.curIndex).addClass("cur")};a.prototype.scrollTo=function(c){this.curIndex=c;this.menu.find("li").removeClass("cur");this.menu.find("li").eq(this.curIndex).addClass("cur");var f=this,d=this.el.height(),e=0-this.curIndex*d;if(this.opt.beforeFunction&&typeof this.opt.beforeFunction=="function"){this.opt.beforeFunction(this.curIndex)}this.container.animate({top:e},500,"easeInOutCubic",function(){f.setScroll=true;if(f.opt.afterFunction&&typeof f.opt.afterFunction=="function"){f.opt.afterFunction(f.curIndex)}})};b.fullpage=a})(window);